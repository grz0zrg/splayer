self.onmessage=function(t){"use strict";var o,a,i,d,s,e,h,n,p,r=t.data,l=r.width,g=r.height,u=4*l,f=[],w=0,y=0,m=0,c=0,A=0,v=0,C=1;for(r.options.float?(o=new Float32Array(r.data),d=1):(o=new Uint8ClampedArray(r.data),d=1/255),s=o.length,r.options.mono&&(v=3,C=3),e=0;e<g;e+=1)for(m=0,c=0,h=0;h<l;h+=1)A=e*u+4*h,a=m,i=c,m=o[A+v],c=o[A+C],f[h]||(f[h]=[]),m>0||c>0?(n=m*d,p=c*d,w=a*d,y=i*d,f[h].push({y:e,pl:w,pr:y,dl:n-w,dr:p-y})):(a>0||i>0)&&(w=a*d,y=i*d,f[h].push({y:e,pl:w,pr:y,dl:-w,dr:-y}));postMessage({uid:r.uid,width:r.width,height:r.height,options:r.options,data:f})};